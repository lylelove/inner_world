<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>沈知节 - 我的内心世界</title>
    <meta name="description" content="沈知节的个人博客 - 记录内心世界的碎碎念">
    <meta name="giscus:backlink" content="https://github.com/lylelove/lylelove.github.io">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <style>
        /* === 微信朋友圈样式 === */
        :root {
            /* 字体 */
            --font-primary: 'Noto Sans SC', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', sans-serif;
            
            /* 微信朋友圈色彩系统 */
            --wechat-bg: #ededed;
            --wechat-content-bg: #ffffff;
            --wechat-text: #353535;
            --wechat-text-secondary: #999999;
            --wechat-text-light: #b2b2b2;
            --wechat-green: #07c160;
            --wechat-blue: #576b95;
            --wechat-border: #d9d9d9;
            --wechat-divider: #ebebeb;
            --wechat-shadow: 0 1px 2px rgba(0,0,0,0.1);
            --wechat-radius: 4px;
        }

        /* 重置默认样式 */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: var(--font-primary);
            font-size: 16px;
            line-height: 1.4;
            background: var(--wechat-bg);
            min-height: 100vh;
            color: var(--wechat-text);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* 微信样式滚动条 */
        ::-webkit-scrollbar {
            width: 4px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(0, 0, 0, 0.15);
            border-radius: 2px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(0, 0, 0, 0.25);
        }

        /* 微信主容器 */
        .wechat-container {
            max-width: 500px;
            margin: 0 auto;
            background: var(--wechat-bg);
            min-height: 100vh;
        }

        /* 朋友圈头部 */
        .moments-header {
            position: relative;
            height: 330px;
            overflow: hidden;
        }

        .cover-image {
            width: 100%;
            height: 270px;
            object-fit: cover;
        }

        .user-info {
            position: absolute;
            bottom: 15px;
            right: 15px;
            display: flex;
            align-items: center;
        }

        .user-name {
            color: var(--wechat-text);
            font-size: 18px;
            font-weight: 500;
            margin-right: 10px;
            text-align: right;
        }

        .avatar {
            width: 70px;
            height: 70px;
            border-radius: 4px;
            border: 1px solid var(--wechat-border);
        }

        /* 朋友圈内容区 */
        .moments-content {
            background: var(--wechat-bg);
            padding-bottom: 20px;
        }

        /* Giscus评论区样式 */
        .giscus-container {
            background: var(--wechat-content-bg);
            padding: 15px;
            margin-top: 8px;
        }

        /* 自定义Giscus样式 */
        .giscus-frame {
            width: 100%;
            border: none;
        }

        /* 响应式调整 */
        @media (max-width: 500px) {
            .moments-header {
                height: 280px;
            }
            
            .cover-image {
                height: 220px;
            }
            
            .avatar {
                width: 60px;
                height: 60px;
            }
            
            .user-name {
                font-size: 16px;
            }
        }

        /* 自定义Giscus样式 - 通过CSS变量注入 */
        :root {
            --giscus-theme-color: var(--wechat-green);
            --giscus-background-color: var(--wechat-content-bg);
            --giscus-text-color: var(--wechat-text);
            --giscus-secondary-text-color: var(--wechat-text-secondary);
            --giscus-border-color: var(--wechat-border);
            --giscus-accent-color: var(--wechat-blue);
        }
    </style>
</head>
<body>
    <div class="wechat-container">
        <!-- 朋友圈头部 -->
        <div class="moments-header">
            <img src="https://images.unsplash.com/photo-1506744038136-46273834b3fb?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80" alt="封面图" class="cover-image">
            <div class="user-info">
                <div class="user-name">沈知节</div>
                <img src="https://avatars.githubusercontent.com/u/61548984" alt="头像" class="avatar">
            </div>
        </div>

        <!-- 朋友圈内容区 - 只包含Giscus评论系统 -->
        <div class="moments-content">
            <div class="giscus-container">
                <script src="https://giscus.app/client.js"
                    data-repo="lylelove/lylelove.github.io"
                    data-repo-id="R_kgDOGl9NTw"
                    data-mapping="number"
                    data-term="12"
                    data-reactions-enabled="1"
                    data-emit-metadata="1"
                    data-input-position="bottom"
                    data-theme="light"
                    data-lang="zh-CN"
                    data-strict="1"
                    crossorigin="anonymous"
                    async>
                </script>
            </div>
        </div>
    </div>

    <script>
        // 根据ADVANCED-USAGE.md文档，添加自定义样式和功能
        document.addEventListener('DOMContentLoaded', function() {
            // 创建自定义CSS样式 - 深度模仿微信朋友圈
            const customStyle = document.createElement('style');
            customStyle.textContent = `
                /* 微信朋友圈风格的Giscus评论样式 */
                .giscus {
                    font-family: var(--font-primary) !important;
                    background: transparent !important;
                }
                
                /* 整体容器样式 */
                .giscus .gsc-main {
                    background: transparent !important;
                }
                
                /* 评论框样式 - 朋友圈风格 */
                .giscus .gsc-comment-box {
                    background-color: var(--wechat-content-bg) !important;
                    border: 1px solid var(--wechat-border) !important;
                    border-radius: 4px !important;
                    margin: 8px 0 !important;
                    padding: 12px !important;
                }
                
                /* 评论输入框样式 */
                .giscus .gsc-comment-box textarea {
                    border: 1px solid var(--wechat-border) !important;
                    border-radius: 4px !important;
                    font-size: 15px !important;
                    font-family: var(--font-primary) !important;
                    color: var(--wechat-text) !important;
                    background: var(--wechat-content-bg) !important;
                    padding: 8px 12px !important;
                }
                
                /* 评论按钮样式 */
                .giscus .gsc-comment-box-buttons button {
                    background-color: var(--wechat-green) !important;
                    border: none !important;
                    border-radius: 4px !important;
                    color: white !important;
                    font-size: 14px !important;
                    padding: 6px 16px !important;
                }
                
                .giscus .gsc-comment-box-buttons button:hover {
                    background-color: #06ad56 !important;
                }
                
                /* 评论列表样式 - 朋友圈动态风格 */
                .giscus .gsc-comment {
                    background: var(--wechat-content-bg) !important;
                    border: none !important;
                    border-bottom: 8px solid var(--wechat-bg) !important;
                    padding: 15px !important;
                    margin: 0 !important;
                    display: flex !important;
                    align-items: flex-start !important;
                }
                
                /* 评论者头像样式 - 朋友圈风格 */
                .giscus .gsc-comment-author-avatar {
                    margin-right: 10px !important;
                    flex-shrink: 0 !important;
                }
                
                .giscus .gsc-comment-author-avatar img {
                    border-radius: 3px !important;
                    width: 40px !important;
                    height: 40px !important;
                }
                
                /* 评论主体区域 */
                .giscus .gsc-comment-body {
                    flex: 1 !important;
                }
                
                /* 评论者名称样式 - 朋友圈蓝色 */
                .giscus .gsc-comment-author-name {
                    color: var(--wechat-blue) !important;
                    font-weight: 500 !important;
                    font-size: 16px !important;
                    margin-bottom: 6px !important;
                    display: block !important;
                }
                
                /* 评论内容样式 */
                .giscus .gsc-comment-content {
                    color: var(--wechat-text) !important;
                    font-size: 15px !important;
                    line-height: 1.5 !important;
                    margin-bottom: 10px !important;
                }
                
                /* 评论时间和操作区域 */
                .giscus .gsc-comment-footer {
                    display: flex !important;
                    justify-content: space-between !important;
                    align-items: center !important;
                    color: var(--wechat-text-secondary) !important;
                    font-size: 14px !important;
                    margin-top: 8px !important;
                }
                
                /* 回复按钮样式 */
                .giscus .gsc-comment-footer button {
                    color: var(--wechat-text-secondary) !important;
                    background: none !important;
                    border: none !important;
                    font-size: 14px !important;
                    padding: 0 !important;
                }
                
                /* 点赞反应区域 - 朋友圈风格 */
                .giscus .gsc-reactions {
                    background: #f7f7f7 !important;
                    border-radius: 3px !important;
                    padding: 5px 10px !important;
                    margin-top: 10px !important;
                    font-size: 14px !important;
                }
                
                .giscus .gsc-reactions button {
                    background: none !important;
                    border: none !important;
                    color: var(--wechat-text-secondary) !important;
                    font-size: 14px !important;
                    margin-right: 8px !important;
                }
                
                /* 嵌套回复样式 */
                .giscus .gsc-reply {
                    margin-left: 50px !important;
                    border-left: 1px solid var(--wechat-divider) !important;
                    padding-left: 15px !important;
                    margin-top: 10px !important;
                }
                
                /* 评论统计和排序 */
                .giscus .gsc-comments-count, .giscus .gsc-comments-sort {
                    color: var(--wechat-text-secondary) !important;
                    font-size: 14px !important;
                    background: var(--wechat-content-bg) !important;
                    padding: 10px 15px !important;
                    border-bottom: 1px solid var(--wechat-divider) !important;
                }
                
                /* 加载更多按钮 */
                .giscus .gsc-pagination button {
                    background: var(--wechat-content-bg) !important;
                    border: 1px solid var(--wechat-border) !important;
                    color: var(--wechat-text) !important;
                    border-radius: 4px !important;
                    padding: 8px 16px !important;
                    font-size: 14px !important;
                }
                
                /* 移除默认边框和阴影 */
                .giscus * {
                    box-shadow: none !important;
                }
                
                /* 确保整体背景透明 */
                .giscus .gsc-timeline {
                    background: transparent !important;
                }
            `;
            document.head.appendChild(customStyle);

            // 监听giscus框架加载完成
            window.addEventListener('message', function(event) {
                if (event.origin !== 'https://giscus.app') return;
                if (!(typeof event.data === 'object' && event.data.giscus)) return;
                
                // 如果有错误消息，可以在控制台查看
                if ('error' in event.data.giscus) {
                    console.error('Giscus错误:', event.data.giscus.error);
                }
                
                // 如果有讨论元数据，可以进行处理
                if ('discussion' in event.data.giscus) {
                    console.log('讨论加载成功');
                    
                    // 向giscus发送自定义主题配置
                    const iframe = document.querySelector('iframe.giscus-frame');
                    if (iframe) {
                        const message = {
                            setConfig: {
                                theme: 'light',
                                reactionsEnabled: true,
                                emitMetadata: true,
                                inputPosition: 'bottom'
                            }
                        };
                        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
                    }
                }
            });
        });
    </script>
</body>
</html>